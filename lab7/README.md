# Лабораторная работа 7 — Регрессионный анализ и проверка гипотез

## Состав репозитория
- `data.csv` — набор данных по странам: население, ВВП, CO₂ на душу, потребление энергии, расходы на здравоохранение, урбанизация.
- `lab7.ipynb` — основной ноутбук лабораторной: установка зависимостей, загрузка данных, анализ, модели, диагностика, экспорт результатов.
- `regression_analysis.ipynb` — пример полного MLR-анализа (источник идей/структуры).
- `lab5.ipynb` — наработки по простой регрессии и ANOVA (использовано для раздела с одной переменной).
- `Задание ПЗ 7.pdf` — формулировка задания.
- `lab7_regression_summary.csv`, `lab7_regression_results.csv` — экспорт сводных таблиц (создаются при выполнении ноутбука).

## Быстрый старт
1. Откройте `lab7.ipynb` в Jupyter.
2. Запустите ячейки сверху вниз. Первая ячейка автоматически установит недостающие пакеты.
3. Убедитесь, что в той же папке находится `data.csv`.

## Что делает ноутбук
1) Установка окружения
- Автоматически устанавливает: pandas, numpy, matplotlib, seaborn, scipy, statsmodels, scikit-learn.

2) Импорты и конфигурация
- Подключает библиотеки, настраивает стиль визуализаций и подавляет предупреждения для чистого вывода.

3) Загрузка и первичный осмотр данных
- Читает `data.csv`, показывает размерность, первые строки, типы столбцов, количество пропусков.

4) Проверка точности и целостности данных (Data Validation)
- Проверяет схему столбцов и типы данных.
- Валидирует диапазоны по предметной области:
  - Население (млн) > 0 и разумные верхние границы.
  - ВВП (млрд $) > 0 и разумные верхние границы.
  - CO₂/чел ≥ 0, потребление энергии/чел > 0, здравоохранение в % ВВП > 0, урбанизация в [0,100].
- Ищет пропуски и дубликаты стран.
- Отмечает потенциальные выбросы по |z| > 3 для числовых столбцов.

5) Подготовка к MLR (множественная линейная регрессия)
- Переименовывает столбцы в удобные: `y_Population`, `x1_GDP`, `x2_CO2`, `x3_Energy`, `x4_Healthcare`, `x5_Urbanization`.
- Считает корреляции, строит тепловую карту.
- Отбирает факторы по порогу |r| ≥ 0.3 относительно `y_Population`.
- Проверяет мультиколлинеарность через VIF и исключает факторы с VIF ≥ 10.

6) Построение MLR-модели и оценка
- Строит OLS-модель (`statsmodels`), печатает сводку и уравнение регрессии.
- Оценивает значимость коэффициентов (t-критерий, p-value), доверительные интервалы.
- Считает метрики качества: R², Adjusted R², RMSE, MAE.
- Выполняет глобальный F-тест на значимость модели.

7) Диагностика предпосылок
- Проверяет нормальность остатков (Шапиро–Уилк, Джарке–Бера).
- Проверяет автокорреляцию остатков (Дарбин–Уотсон).
- Визуализирует остатки: против предсказаний, гистограмму, QQ-plot, стандартизованные остатки.
- График Фактические vs Предсказанные.

8) Экспорт результатов
- Сохраняет таблицу параметров и доверительных интервалов в `lab7_regression_summary.csv`.
- Сохраняет фактические значения, предсказания и остатки в `lab7_regression_results.csv`.

9) Простая линейная регрессия и ANOVA (в стиле ЛР5)
- Выбирает фактор с максимальной |corr| по модулю с `y_Population`.
- Строит простую регрессию, вручную формирует таблицу ANOVA и F-критерий.
- Рисует линию регрессии и график Фактические vs Предсказанные.

## Как трактовать результаты
- R² показывает долю объяснённой вариации целевой переменной. Adjusted R² корректирует R² на число факторов.
- Низкое p-value (< 0.05) для коэффициента означает его статистическую значимость.
- F-тест оценивает общую значимость модели.
- Шапиро/Джарке–Бера: p-value > 0.05 — нет оснований отвергать нормальность остатков.
- Дарбин–Уотсон ~ 2 — отсутствие автокорреляции; < 1.5 — положительная автокорреляция; > 2.5 — отрицательная.
- Важно учитывать экономический/предметный смысл знаков коэффициентов и масштабов переменных.

## Возможные ограничения
- Данные по странам имеют сильные масштабы и выбросы (например, Китай, Индия, Исландия по энергии), что влияет на нормальность.
- Линейная спецификация может быть упрощением (возможны нелинейности/взаимодействия).
- Корреляционный отбор и VIF — эвристики; при необходимости применяйте кросс-валидацию и регуляризацию.

## Воспроизводимость
- Ноутбук самостоятельно установит недостающие пакеты.
- Фиксируйте версии при необходимости (например, через `pip freeze > requirements.txt`).

## Контакты
Если заметите несоответствия или захотите расширить анализ — добавьте задачу/комментарии и укажите желаемые изменения.
